# Fluent Bit config for monitoring-frontend sidecar: tail nginx logs â†’ stdout
# (Fluent Bit image has no /bin/sh; use static config only.)
# To ship to Kafka instead, replace this config with a Kafka OUTPUT and apply the kafka overlay or patch the ConfigMap.
apiVersion: v1
kind: ConfigMap
metadata:
  name: fluent-bit-frontend-config
  namespace: apps
data:
  fluent-bit.conf: |
    [SERVICE]
        Flush         1
        Log_Level     info

    [INPUT]
        Name          tail
        Path          /var/log/nginx/access.log
        Read_from_Head true
        Tag           nginx.access
        Refresh_Interval 5

    [INPUT]
        Name          tail
        Path          /var/log/nginx/error.log
        Read_from_Head true
        Tag           nginx.error
        Refresh_Interval 5

    [FILTER]
        Name          modify
        Match         nginx.*
        Add           source monitoring-frontend

    [OUTPUT]
        Name          stdout
        Match         nginx.*
